# Staging Environment Configuration
# Copy this file to .env.staging and fill in the actual values

# =============================================================================
# ENVIRONMENT
# =============================================================================
NODE_ENV=staging
LOG_LEVEL=info
DEBUG=false

# =============================================================================
# WEB APPLICATION
# =============================================================================
NEXT_PUBLIC_APP_URL=https://staging.gogym.mx
NEXT_PUBLIC_BASE_URL=https://staging.gogym.mx
NEXT_PUBLIC_API_URL=https://api-staging.gogym.mx
API_ORIGIN=https://api-staging.gogym.mx

# =============================================================================
# API SERVER
# =============================================================================
PORT=4001
API_HOST=0.0.0.0
TRUST_PROXY=true
CORS_ORIGIN=https://staging.gogym.mx

# =============================================================================
# DATABASE
# =============================================================================
# Supabase staging database URL
DATABASE_URL=postgresql://postgres:[PASSWORD]@[PROJECT_ID].supabase.co:5432/postgres?schema=public

# =============================================================================
# AUTHENTICATION
# =============================================================================
JWT_SECRET=[GENERATE_RANDOM_SECRET_256_BITS]
JWT_EXPIRES_IN=24h
REFRESH_TOKEN_EXPIRES_IN=7d

# =============================================================================
# STRIPE CONFIGURATION
# =============================================================================
# Use Stripe test keys for staging
STRIPE_SECRET_KEY=sk_test_[YOUR_STRIPE_TEST_SECRET_KEY]
STRIPE_PUBLISHABLE_KEY=pk_test_[YOUR_STRIPE_TEST_PUBLISHABLE_KEY]
STRIPE_WEBHOOK_SECRET=whsec_[YOUR_STAGING_WEBHOOK_SECRET]

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# Email service configuration (e.g., SendGrid, AWS SES)
EMAIL_FROM=noreply@staging.gogym.mx
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=[YOUR_SENDGRID_API_KEY]

# =============================================================================
# STORAGE
# =============================================================================
# File storage configuration
STORAGE_PROVIDER=supabase
SUPABASE_URL=https://[PROJECT_ID].supabase.co
SUPABASE_ANON_KEY=[YOUR_SUPABASE_ANON_KEY]
SUPABASE_SERVICE_ROLE_KEY=[YOUR_SUPABASE_SERVICE_ROLE_KEY]

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Application monitoring
SENTRY_DSN=[YOUR_SENTRY_DSN_FOR_STAGING]
SENTRY_ENVIRONMENT=staging

# Performance monitoring
NEW_RELIC_LICENSE_KEY=[YOUR_NEW_RELIC_KEY]
NEW_RELIC_APP_NAME=vigor-gym-staging

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true

# =============================================================================
# SECURITY
# =============================================================================
# Security headers and CSP
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true
HSTS_MAX_AGE=31536000

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_SAVED_CARDS=true
FEATURE_OBSERVABILITY=true
FEATURE_SSR_DASHBOARD=true
FEATURE_WEBHOOK_PROCESSING=true
FEATURE_STRUCTURED_LOGGING=true

# =============================================================================
# TESTING
# =============================================================================
# Test user credentials for staging
STAGING_TEST_EMAIL=admin@testgym.mx
STAGING_TEST_PASSWORD=TestPassword123!

# =============================================================================
# DEPLOYMENT
# =============================================================================
# Deployment configuration
DEPLOY_ENVIRONMENT=staging
DEPLOY_BRANCH=feat/p0w3-golive-payments-depth
DEPLOY_COMMIT_SHA=[AUTO_POPULATED_BY_CI]
DEPLOY_TIMESTAMP=[AUTO_POPULATED_BY_CI]

# =============================================================================
# HEALTH CHECKS
# =============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
METRICS_PATH=/v1/metrics/health

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================
# Database backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7

# =============================================================================
# NOTIFICATIONS
# =============================================================================
# Slack notifications for staging alerts
SLACK_WEBHOOK_URL=[YOUR_SLACK_WEBHOOK_FOR_STAGING_ALERTS]
ALERT_EMAIL=devops@gogym.mx
